<!doctype html>
<html lang="de">
   <head>
      <meta charset="UTF-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <title>Admin Dashboard - Terminfindung</title>
      <link rel="icon" type="image/svg+xml" href="favicon.svg" />
      <link rel="stylesheet" href="css/admin.css" />
   </head>
   <body>
      <!-- Login Container -->
      <div id="loginContainer" class="login-container">
         <div class="login-box">
            <h1>üîê Admin Login</h1>
            <div id="loginAlert"></div>
            <form id="loginForm">
               <div class="form-group">
                  <label for="username">Benutzername</label>
                  <input
                     type="text"
                     id="username"
                     name="username"
                     required
                     autocomplete="username"
                  />
               </div>
               <div class="form-group">
                  <label for="password">Passwort</label>
                  <input
                     type="password"
                     id="password"
                     name="password"
                     required
                     autocomplete="current-password"
                  />
               </div>
               <button type="submit" class="btn btn-primary">Anmelden</button>
            </form>
         </div>
      </div>

      <!-- Dashboard Container -->
      <div id="dashboardContainer" class="dashboard-container">
         <!-- Header -->
         <div class="dashboard-header">
            <h1>üìä Admin Dashboard</h1>
            <button class="btn btn-logout" onclick="logout()">Abmelden</button>
         </div>

         <!-- Alert Container -->
         <div id="dashboardAlert"></div>

         <!-- Navigation Tabs -->
         <div class="tabs">
            <button class="tab active" onclick="switchTab('overview', this)">
               √úbersicht
            </button>
            <button class="tab" onclick="switchTab('participants', this)">
               Teilnehmer
            </button>
            <button class="tab" onclick="switchTab('timeslots', this)">
               Zeitslots
            </button>
            <button class="tab" onclick="switchTab('bookings', this)">
               Buchungen
            </button>
            <button class="tab" onclick="switchTab('calendar', this)">
               Kalender
            </button>
            <button class="tab" onclick="switchTab('review', this)">
               Bewertungen
               <span
                  id="reviewTabBadge"
                  class="badge"
                  style="display: none"
               ></span>
            </button>
            <button class="tab" onclick="switchTab('logs', this)">
               Protokoll
            </button>
         </div>

         <!-- Tab Content -->
         <div class="tab-content-container">
            <!-- Overview Tab -->
            <div id="overviewTab" class="tab-content active">
               <div class="card">
                  <h2>Studienfortschritt</h2>

                  <!-- Progress Bar -->
                  <div style="margin-bottom: 20px">
                     <div
                        style="
                           display: flex;
                           justify-content: space-between;
                           align-items: center;
                           margin-bottom: 8px;
                        "
                     >
                        <span
                           style="
                              font-size: 13px;
                              font-weight: 600;
                              color: #555;
                           "
                           >Beide Termine absolviert</span
                        >
                        <span
                           id="progressPercentage"
                           style="
                              font-weight: 600;
                              font-size: 14px;
                              color: #555;
                           "
                           >0%</span
                        >
                     </div>
                     <div
                        style="
                           background: #e0e0e0;
                           height: 24px;
                           border-radius: 12px;
                           overflow: hidden;
                           display: flex;
                        "
                     >
                        <div
                           id="progressBarFillSuccess"
                           style="
                              background: #48bb78;
                              transition: width 0.3s;
                              width: 0%;
                           "
                        ></div>
                        <div
                           id="progressBarFillIssues"
                           style="
                              background: #ed8936;
                              transition: width 0.3s;
                              width: 0%;
                           "
                        ></div>
                     </div>
                  </div>

                  <!-- Timeslot Overview -->
                  <div
                     style="
                        display: flex;
                        gap: 12px;
                        margin-bottom: 16px;
                        padding: 12px;
                        background: #f8f9fa;
                        border-radius: 8px;
                     "
                  >
                     <div style="flex: 1">
                        <div
                           style="
                              display: flex;
                              align-items: center;
                              gap: 8px;
                              margin-bottom: 4px;
                           "
                        >
                           <span style="font-size: 18px">üë•</span>
                           <span
                              style="
                                 font-size: 13px;
                                 font-weight: 600;
                                 color: #555;
                              "
                              >Teilnehmer</span
                           >
                        </div>
                        <div
                           style="
                              font-size: 20px;
                              font-weight: 600;
                              color: #333;
                           "
                        >
                           <span id="participantCount">0</span>/<span
                              id="participantGoal"
                              >80</span
                           >
                        </div>
                     </div>
                     <div style="flex: 1">
                        <div
                           style="
                              display: flex;
                              align-items: center;
                              gap: 8px;
                              margin-bottom: 4px;
                           "
                        >
                           <span style="font-size: 18px">üìÖ</span>
                           <span
                              style="
                                 font-size: 13px;
                                 font-weight: 600;
                                 color: #555;
                              "
                              >Zeitslots</span
                           >
                        </div>
                        <div
                           style="
                              font-size: 20px;
                              font-weight: 600;
                              color: #333;
                           "
                        >
                           <span id="slotsInfo">0 / 0</span>
                        </div>
                     </div>
                     <div style="flex: 1">
                        <div
                           style="
                              display: flex;
                              align-items: center;
                              gap: 8px;
                              margin-bottom: 4px;
                           "
                        >
                           <span style="font-size: 18px">‚úì</span>
                           <span
                              style="
                                 font-size: 13px;
                                 font-weight: 600;
                                 color: #16a34a;
                              "
                              >Verf√ºgbar</span
                           >
                        </div>
                        <div
                           style="
                              font-size: 20px;
                              font-weight: 600;
                              color: #16a34a;
                           "
                           id="availableInfo"
                        >
                           0
                        </div>
                     </div>
                  </div>

                  <!-- Participant Progress Stats -->
                  <div style="margin-bottom: 8px; padding-left: 2px">
                     <span
                        style="font-size: 13px; font-weight: 600; color: #666"
                        >Teilnehmerstatus</span
                     >
                  </div>
                  <div
                     style="
                        display: grid;
                        grid-template-columns: repeat(
                           auto-fit,
                           minmax(160px, 1fr)
                        );
                        gap: 10px;
                     "
                  >
                     <!-- Both Finished -->
                     <div
                        id="bothFinishedCard"
                        style="
                           display: flex;
                           align-items: center;
                           gap: 10px;
                           padding: 10px;
                           background: #f0fdf4;
                           border-radius: 8px;
                           position: relative;
                           cursor: pointer;
                        "
                     >
                        <div style="font-size: 20px">‚úì</div>
                        <div>
                           <div
                              style="
                                 font-size: 18px;
                                 font-weight: 600;
                                 color: #16a34a;
                              "
                              id="bothFinished"
                           >
                              0
                           </div>
                           <div style="font-size: 11px; color: #166534">
                              Beide absolviert
                           </div>
                        </div>
                     </div>

                     <!-- Waiting for Second -->
                     <div
                        id="waitingForSecondCard"
                        style="
                           display: flex;
                           align-items: center;
                           gap: 10px;
                           padding: 10px;
                           background: #dbeafe;
                           border-radius: 8px;
                           position: relative;
                           cursor: pointer;
                        "
                     >
                        <div style="font-size: 20px">‚è≥</div>
                        <div>
                           <div
                              style="
                                 font-size: 18px;
                                 font-weight: 600;
                                 color: #2563eb;
                              "
                              id="waitingForSecond"
                           >
                              0
                           </div>
                           <div style="font-size: 11px; color: #1e40af">
                              Warten auf 2. Termin
                           </div>
                        </div>
                     </div>

                     <!-- No-show on Second -->
                     <div
                        id="noShowSecondCard"
                        style="
                           display: flex;
                           align-items: center;
                           gap: 10px;
                           padding: 10px;
                           background: #fee2e2;
                           border-radius: 8px;
                           position: relative;
                           cursor: pointer;
                        "
                     >
                        <div style="font-size: 20px">‚úó</div>
                        <div>
                           <div
                              style="
                                 font-size: 18px;
                                 font-weight: 600;
                                 color: #dc2626;
                              "
                              id="noShowSecond"
                           >
                              0
                           </div>
                           <div style="font-size: 11px; color: #991b1b">
                              No-Show beim 2.
                           </div>
                        </div>
                     </div>

                     <!-- Data Issues -->
                     <div
                        id="dataIssuesCard"
                        style="
                           display: flex;
                           align-items: center;
                           gap: 10px;
                           padding: 10px;
                           background: #fef3c7;
                           border-radius: 8px;
                           position: relative;
                           cursor: pointer;
                        "
                     >
                        <div style="font-size: 20px">‚ö†</div>
                        <div>
                           <div
                              style="
                                 font-size: 18px;
                                 font-weight: 600;
                                 color: #d97706;
                              "
                              id="dataIssues"
                           >
                              0
                           </div>
                           <div style="font-size: 11px; color: #92400e">
                              Datenprobleme
                           </div>
                        </div>
                     </div>
                  </div>
               </div>

               <div class="card">
                  <h2>Bevorstehende Termine</h2>
                  <div id="upcomingAppointments">
                     <div class="loading">Lade Termine...</div>
                  </div>
               </div>
            </div>

            <!-- Participants Tab -->
            <div id="participantsTab" class="tab-content">
               <div class="card">
                  <h2>Teilnehmer</h2>
                  <div id="participantsTableContainer">
                     <div class="loading">Lade Teilnehmer...</div>
                  </div>
               </div>
            </div>

            <!-- Timeslots Tab -->
            <div id="timeslotsTab" class="tab-content">
               <div class="card">
                  <h2>Zeitslots</h2>
                  <div
                     style="
                        display: flex;
                        justify-content: space-between;
                        margin-bottom: 20px;
                     "
                  >
                     <div style="display: flex; gap: 10px">
                        <button
                           class="btn btn-primary"
                           onclick="showCreateTimeslotModal()"
                        >
                           + Neuer Zeitslot
                        </button>
                        <button
                           class="btn btn-secondary"
                           onclick="showBulkCreateModal()"
                        >
                           üìÖ Mehrere erstellen
                        </button>
                     </div>
                     <button
                        id="bulkDeleteBtn"
                        class="btn btn-danger"
                        onclick="bulkDeleteSelectedTimeslots()"
                        style="display: none"
                     >
                        <span id="selectedCount">0</span> ausgew√§hlte l√∂schen
                     </button>
                  </div>
                  <div id="timeslotsTableContainer">
                     <div class="loading">Lade Zeitslots...</div>
                  </div>
                  <!-- Pagination Controls -->
                  <div
                     id="timeslotsPagination"
                     class="pagination-controls"
                     style="display: none; margin-top: 20px"
                  >
                     <div
                        style="
                           display: flex;
                           justify-content: space-between;
                           align-items: center;
                           flex-wrap: wrap;
                           gap: 15px;
                        "
                     >
                        <div>
                           <span style="color: #666"
                              >Zeige
                              <span id="timeslotsRangeStart">0</span>-<span
                                 id="timeslotsRangeEnd"
                                 >0</span
                              >
                              von <span id="timeslotsTotal">0</span></span
                           >
                        </div>
                        <div
                           style="display: flex; gap: 10px; align-items: center"
                        >
                           <button
                              class="btn btn-secondary btn-sm"
                              onclick="goToTimeslotsPage('first')"
                              id="timeslotsFirstBtn"
                           >
                              ‚èÆ Erste
                           </button>
                           <button
                              class="btn btn-secondary btn-sm"
                              onclick="goToTimeslotsPage('prev')"
                              id="timeslotsPrevBtn"
                           >
                              ‚óÄ Zur√ºck
                           </button>
                           <span style="padding: 0 10px; font-weight: 600">
                              Seite <span id="timeslotsCurrentPage">1</span> von
                              <span id="timeslotsTotalPages">1</span>
                           </span>
                           <button
                              class="btn btn-secondary btn-sm"
                              onclick="goToTimeslotsPage('next')"
                              id="timeslotsNextBtn"
                           >
                              Weiter ‚ñ∂
                           </button>
                           <button
                              class="btn btn-secondary btn-sm"
                              onclick="goToTimeslotsPage('last')"
                              id="timeslotsLastBtn"
                           >
                              Letzte ‚è≠
                           </button>
                        </div>
                        <div
                           style="display: flex; gap: 10px; align-items: center"
                        >
                           <label for="timeslotsPageSize" style="margin: 0"
                              >Pro Seite:</label
                           >
                           <select
                              id="timeslotsPageSize"
                              onchange="changeTimeslotsPageSize()"
                              style="
                                 padding: 5px 10px;
                                 border: 2px solid #e0e0e0;
                                 border-radius: 6px;
                              "
                           >
                              <option value="25">25</option>
                              <option value="50">50</option>
                              <option value="100" selected>100</option>
                              <option value="200">200</option>
                              <option value="all">Alle</option>
                           </select>
                        </div>
                     </div>
                  </div>
               </div>
            </div>

            <!-- Bookings Tab -->
            <div id="bookingsTab" class="tab-content">
               <div class="card">
                  <h2>Buchungen</h2>
                  <div id="bookingsTableContainer">
                     <div class="loading">Lade Buchungen...</div>
                  </div>
               </div>
            </div>

            <!-- Calendar Tab -->
            <div id="calendarTab" class="tab-content">
               <div class="card">
                  <h2>Kalenderansicht</h2>
                  <div
                     style="
                        display: flex;
                        justify-content: space-between;
                        align-items: center;
                        margin-bottom: 20px;
                     "
                  >
                     <button
                        class="btn btn-secondary"
                        onclick="changeCalendarMonth(-1)"
                     >
                        ‚óÄ Vorheriger Monat
                     </button>
                     <h3 id="calendarMonthYear" style="margin: 0"></h3>
                     <button
                        class="btn btn-secondary"
                        onclick="changeCalendarMonth(1)"
                     >
                        N√§chster Monat ‚ñ∂
                     </button>
                  </div>
                  <button
                     class="btn btn-primary"
                     onclick="goToCurrentMonth()"
                     style="margin-bottom: 20px"
                  >
                     Aktueller Monat
                  </button>

                  <!-- Legend -->
                  <div
                     style="
                        display: flex;
                        gap: 20px;
                        margin-bottom: 20px;
                        flex-wrap: wrap;
                     "
                  >
                     <div style="display: flex; align-items: center; gap: 5px">
                        <div
                           style="
                              width: 20px;
                              height: 20px;
                              background: #4a5568;
                              border-radius: 3px;
                           "
                        ></div>
                        <span style="font-size: 14px">Dual</span>
                     </div>
                     <div style="display: flex; align-items: center; gap: 5px">
                        <div
                           style="
                              width: 20px;
                              height: 20px;
                              background: #667eea;
                              border-radius: 3px;
                           "
                        ></div>
                        <span style="font-size: 14px">Haupttermin</span>
                     </div>
                     <div style="display: flex; align-items: center; gap: 5px">
                        <div
                           style="
                              width: 20px;
                              height: 20px;
                              background: #48bb78;
                              border-radius: 3px;
                           "
                        ></div>
                        <span style="font-size: 14px">Folgetermin</span>
                     </div>
                     <div style="display: flex; align-items: center; gap: 5px">
                        <div
                           style="
                              width: 20px;
                              height: 20px;
                              background: #ed8936;
                              border-radius: 3px;
                           "
                        ></div>
                        <span style="font-size: 14px">Gebucht</span>
                     </div>
                  </div>

                  <!-- Calendar Grid -->
                  <div id="calendarGrid"></div>
               </div>
            </div>

            <!-- Review Tab -->
            <div id="reviewTab" class="tab-content">
               <div class="card">
                  <h2>üîç Termine bewerten</h2>
                  <p style="color: #666; margin-bottom: 20px">
                     Bewerten Sie vergangene Termine, um den Studienfortschritt
                     zu verfolgen und die Datenqualit√§t zu dokumentieren.
                  </p>
                  <div id="unreviewedContainer">
                     <div class="loading">Lade Termine...</div>
                  </div>
               </div>
            </div>

            <!-- Logs Tab -->
            <div id="logsTab" class="tab-content">
               <div class="card">
                  <h2>Aktivit√§tsprotokoll</h2>
                  <div id="logsContainer" class="loading">
                     <div class="loading-spinner"></div>
                     <p>Lade Protokoll...</p>
                  </div>
                  <!-- Pagination Controls -->
                  <div
                     id="logsPagination"
                     class="pagination-controls"
                     style="display: none; margin-top: 20px"
                  >
                     <div
                        style="
                           display: flex;
                           justify-content: space-between;
                           align-items: center;
                           flex-wrap: wrap;
                           gap: 15px;
                        "
                     >
                        <div>
                           <span style="color: #666"
                              >Zeige <span id="logsRangeStart">0</span>-<span
                                 id="logsRangeEnd"
                                 >0</span
                              >
                              von <span id="logsTotal">0</span></span
                           >
                        </div>
                        <div
                           style="display: flex; gap: 10px; align-items: center"
                        >
                           <button
                              class="btn btn-secondary btn-sm"
                              onclick="goToLogsPage('first')"
                              id="logsFirstBtn"
                           >
                              ‚èÆ Erste
                           </button>
                           <button
                              class="btn btn-secondary btn-sm"
                              onclick="goToLogsPage('prev')"
                              id="logsPrevBtn"
                           >
                              ‚óÄ Zur√ºck
                           </button>
                           <span style="padding: 0 10px; font-weight: 600">
                              Seite <span id="logsCurrentPage">1</span> von
                              <span id="logsTotalPages">1</span>
                           </span>
                           <button
                              class="btn btn-secondary btn-sm"
                              onclick="goToLogsPage('next')"
                              id="logsNextBtn"
                           >
                              Weiter ‚ñ∂
                           </button>
                           <button
                              class="btn btn-secondary btn-sm"
                              onclick="goToLogsPage('last')"
                              id="logsLastBtn"
                           >
                              Letzte ‚è≠
                           </button>
                        </div>
                        <div
                           style="display: flex; gap: 10px; align-items: center"
                        >
                           <label for="logsPageSize" style="margin: 0"
                              >Pro Seite:</label
                           >
                           <select
                              id="logsPageSize"
                              onchange="changeLogsPageSize()"
                              style="
                                 padding: 5px 10px;
                                 border: 2px solid #e0e0e0;
                                 border-radius: 6px;
                              "
                           >
                              <option value="25">25</option>
                              <option value="50">50</option>
                              <option value="100" selected>100</option>
                              <option value="200">200</option>
                              <option value="all">Alle</option>
                           </select>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </div>

      <!-- Create/Edit Timeslot Modal -->
      <div id="timeslotModal" class="modal">
         <div class="modal-content">
            <div class="modal-header">
               <h3 id="timeslotModalTitle">Neuer Zeitslot</h3>
            </div>
            <div class="modal-body">
               <form id="timeslotForm">
                  <input type="hidden" id="timeslotId" />
                  <div class="form-group">
                     <label for="startTime">Startzeit *</label>
                     <input
                        type="datetime-local"
                        id="startTime"
                        name="startTime"
                        autocomplete="off"
                        required
                     />
                  </div>
                  <div class="form-group">
                     <label for="endTime">Endzeit *</label>
                     <input
                        type="datetime-local"
                        id="endTime"
                        name="endTime"
                        autocomplete="off"
                        required
                     />
                  </div>
                  <div class="form-group">
                     <label for="location">Ort</label>
                     <input
                        type="text"
                        id="location"
                        name="location"
                        placeholder="z.B. Raum 101"
                     />
                  </div>
                  <div class="form-group">
                     <label for="appointmentType">Termintyp *</label>
                     <select
                        id="appointmentType"
                        name="appointmentType"
                        required
                        style="
                           width: 100%;
                           padding: 12px;
                           border: 2px solid #e0e0e0;
                           border-radius: 6px;
                           font-size: 16px;
                        "
                     >
                        <option value="dual" selected>
                           Dual (Haupt- oder Folgetermin)
                        </option>
                        <option value="primary">Haupttermin (Primary)</option>
                        <option value="followup">
                           Folgetermin (Follow-up)
                        </option>
                     </select>
                  </div>
                  <div class="form-group">
                     <label for="capacity">Kapazit√§t</label>
                     <input
                        type="number"
                        id="capacity"
                        name="capacity"
                        min="1"
                        placeholder="Leer lassen f√ºr unbegrenzt"
                     />
                     <small style="display: block; margin-top: 5px; color: #666"
                        >Nur f√ºr Primary/Followup Termine. Bei Dual siehe
                        unten.</small
                     >
                  </div>
                  <div
                     class="form-group"
                     id="dualCapacityFields"
                     style="
                        display: none;
                        border: 2px solid #667eea;
                        padding: 15px;
                        border-radius: 6px;
                        background: #f8f9ff;
                     "
                  >
                     <h4 style="margin-bottom: 10px; color: #667eea">
                        Dual-Termin Kapazit√§ten
                     </h4>
                     <small
                        style="display: block; margin-bottom: 10px; color: #666"
                     >
                        F√ºr Dual-Termine: Geben Sie unterschiedliche Kapazit√§ten
                        an, je nachdem ob der Termin als Haupttermin oder
                        Folgetermin gebucht wird.
                     </small>
                     <div class="form-group">
                        <label for="primaryCapacity"
                           >Kapazit√§t als Haupttermin</label
                        >
                        <input
                           type="number"
                           id="primaryCapacity"
                           name="primaryCapacity"
                           min="1"
                           placeholder="z.B. 1"
                        />
                     </div>
                     <div class="form-group">
                        <label for="followupCapacity"
                           >Kapazit√§t als Folgetermin</label
                        >
                        <input
                           type="number"
                           id="followupCapacity"
                           name="followupCapacity"
                           min="1"
                           placeholder="z.B. 10"
                        />
                     </div>
                  </div>
               </form>
            </div>
            <div class="modal-footer">
               <button class="btn btn-secondary" onclick="closeTimeslotModal()">
                  Abbrechen
               </button>
               <button
                  class="btn btn-primary"
                  id="saveTimeslotBtn"
                  onclick="saveTimeslot()"
               >
                  Speichern
               </button>
            </div>
         </div>
      </div>

      <!-- Bulk Create Timeslots Modal -->
      <div id="bulkCreateModal" class="modal">
         <div class="modal-content" style="max-width: 900px">
            <div class="modal-header">
               <h3>Mehrere Zeitslots erstellen</h3>
               <button class="close-btn" onclick="closeBulkCreateModal()">
                  √ó
               </button>
            </div>
            <div class="modal-body">
               <form id="bulkCreateForm">
                  <div class="form-group">
                     <label for="bulkStartDate">Startdatum *</label>
                     <input
                        type="date"
                        id="bulkStartDate"
                        name="bulkStartDate"
                        required
                     />
                  </div>
                  <div class="form-group">
                     <label for="bulkEndDate">Enddatum *</label>
                     <input
                        type="date"
                        id="bulkEndDate"
                        name="bulkEndDate"
                        required
                     />
                  </div>
                  <div class="form-group">
                     <label for="bulkDuration">Termindauer (Minuten) *</label>
                     <input
                        type="number"
                        id="bulkDuration"
                        name="bulkDuration"
                        min="15"
                        step="15"
                        value="60"
                        required
                     />
                  </div>
                  <div class="form-group">
                     <label for="bulkBreak"
                        >Pause zwischen Terminen (Minuten) *</label
                     >
                     <input
                        type="number"
                        id="bulkBreak"
                        name="bulkBreak"
                        min="0"
                        step="5"
                        value="15"
                        required
                     />
                  </div>
                  <div class="form-group">
                     <label for="bulkAppointmentType">Termintyp *</label>
                     <select
                        id="bulkAppointmentType"
                        name="bulkAppointmentType"
                        required
                     >
                        <option value="dual" selected>
                           Dual (Haupt- oder Folgetermin)
                        </option>
                        <option value="primary">Haupttermin (Primary)</option>
                        <option value="followup">
                           Folgetermin (Follow-up)
                        </option>
                     </select>
                  </div>
                  <div class="form-group">
                     <label for="bulkCapacity">Kapazit√§t pro Slot</label>
                     <input
                        type="number"
                        id="bulkCapacity"
                        name="bulkCapacity"
                        min="1"
                        placeholder="Nur f√ºr Primary/Followup. Bei Dual siehe unten."
                     />
                  </div>
                  <div
                     class="form-group"
                     id="bulkDualCapacityFields"
                     style="
                        display: none;
                        border: 2px solid #667eea;
                        padding: 15px;
                        border-radius: 6px;
                        background: #f8f9ff;
                     "
                  >
                     <h4 style="margin-bottom: 10px; color: #667eea">
                        Dual-Termin Kapazit√§ten
                     </h4>
                     <small
                        style="display: block; margin-bottom: 10px; color: #666"
                     >
                        F√ºr Dual-Termine: Geben Sie unterschiedliche Kapazit√§ten
                        an, je nachdem ob der Termin als Haupttermin oder
                        Folgetermin gebucht wird.
                     </small>
                     <div class="form-group">
                        <label for="bulkPrimaryCapacity"
                           >Kapazit√§t als Haupttermin</label
                        >
                        <input
                           type="number"
                           id="bulkPrimaryCapacity"
                           name="bulkPrimaryCapacity"
                           min="1"
                           placeholder="z.B. 1"
                        />
                     </div>
                     <div class="form-group">
                        <label for="bulkFollowupCapacity"
                           >Kapazit√§t als Folgetermin</label
                        >
                        <input
                           type="number"
                           id="bulkFollowupCapacity"
                           name="bulkFollowupCapacity"
                           min="1"
                           placeholder="z.B. 10"
                        />
                     </div>
                  </div>
                  <div class="form-group">
                     <label for="bulkLocation">Ort</label>
                     <input
                        type="text"
                        id="bulkLocation"
                        name="bulkLocation"
                        placeholder="z.B. Raum 101"
                     />
                  </div>
                  <div class="form-group">
                     <label>Wochentage *</label>
                     <div style="display: flex; flex-wrap: wrap; gap: 10px">
                        <label
                           style="display: flex; align-items: center; gap: 5px"
                        >
                           <input
                              type="checkbox"
                              name="weekday"
                              value="1"
                              checked
                           />
                           Montag
                        </label>
                        <label
                           style="display: flex; align-items: center; gap: 5px"
                        >
                           <input
                              type="checkbox"
                              name="weekday"
                              value="2"
                              checked
                           />
                           Dienstag
                        </label>
                        <label
                           style="display: flex; align-items: center; gap: 5px"
                        >
                           <input
                              type="checkbox"
                              name="weekday"
                              value="3"
                              checked
                           />
                           Mittwoch
                        </label>
                        <label
                           style="display: flex; align-items: center; gap: 5px"
                        >
                           <input
                              type="checkbox"
                              name="weekday"
                              value="4"
                              checked
                           />
                           Donnerstag
                        </label>
                        <label
                           style="display: flex; align-items: center; gap: 5px"
                        >
                           <input
                              type="checkbox"
                              name="weekday"
                              value="5"
                              checked
                           />
                           Freitag
                        </label>
                        <label
                           style="display: flex; align-items: center; gap: 5px"
                        >
                           <input type="checkbox" name="weekday" value="6" />
                           Samstag
                        </label>
                        <label
                           style="display: flex; align-items: center; gap: 5px"
                        >
                           <input type="checkbox" name="weekday" value="0" />
                           Sonntag
                        </label>
                     </div>
                  </div>
                  <div class="form-group">
                     <label>
                        Arbeitszeiten *
                        <button
                           type="button"
                           class="btn btn-secondary btn-sm"
                           onclick="addWorkingHoursRow()"
                           style="margin-left: 10px"
                        >
                           + Weitere Zeitspanne
                        </button>
                     </label>
                     <div id="workingHoursContainer">
                        <div
                           class="working-hours-row"
                           style="
                              display: flex;
                              gap: 10px;
                              align-items: center;
                              margin-bottom: 10px;
                           "
                        >
                           <input
                              type="time"
                              class="working-hours-start"
                              value="09:00"
                              required
                              style="
                                 flex: 1;
                                 padding: 10px;
                                 border: 2px solid #e0e0e0;
                                 border-radius: 6px;
                              "
                           />
                           <span>bis</span>
                           <input
                              type="time"
                              class="working-hours-end"
                              value="17:00"
                              required
                              style="
                                 flex: 1;
                                 padding: 10px;
                                 border: 2px solid #e0e0e0;
                                 border-radius: 6px;
                              "
                           />
                           <button
                              type="button"
                              class="btn btn-danger btn-sm"
                              onclick="removeWorkingHoursRow(this)"
                           >
                              Entfernen
                           </button>
                        </div>
                     </div>
                  </div>
                  <div style="margin-top: 20px">
                     <button
                        type="button"
                        class="btn btn-secondary"
                        onclick="previewBulkCreate()"
                     >
                        Vorschau anzeigen
                     </button>
                  </div>
                  <div id="bulkPreview" style="margin-top: 20px"></div>
                  <div class="modal-footer">
                     <button
                        type="button"
                        class="btn btn-secondary"
                        onclick="closeBulkCreateModal()"
                     >
                        Abbrechen
                     </button>
                     <button
                        type="submit"
                        class="btn btn-primary"
                        id="bulkCreateBtn"
                     >
                        Zeitslots erstellen
                     </button>
                  </div>
               </form>
            </div>
         </div>
      </div>

      <!-- Day Details Modal -->
      <div id="dayDetailsModal" class="modal">
         <div class="modal-content" style="max-width: 800px; max-height: 85vh">
            <div class="modal-header">
               <h3 id="dayDetailsTitle" style="padding-right: 30px">
                  Termine f√ºr diesen Tag
               </h3>
               <button class="close-btn" onclick="closeDayDetailsModal()">
                  √ó
               </button>
            </div>
            <div class="modal-body" style="max-height: 60vh; overflow-y: auto">
               <div id="dayDetailsContent"></div>
            </div>
            <div class="modal-footer">
               <button
                  class="btn btn-secondary"
                  onclick="closeDayDetailsModal()"
               >
                  Schlie√üen
               </button>
            </div>
         </div>
      </div>

      <!-- Send Email Modal -->
      <div id="sendEmailModal" class="modal">
         <div class="modal-content">
            <div class="modal-header">
               <h3 id="sendEmailModalTitle">Email senden</h3>
               <button class="close-btn" onclick="closeSendEmailModal()">
                  √ó
               </button>
            </div>
            <div class="modal-body">
               <form id="sendEmailForm" onsubmit="return false;">
                  <input type="hidden" id="recipientEmail" />
                  <input type="hidden" id="recipientName" />

                  <div class="form-group">
                     <label>Empf√§nger:</label>
                     <p
                        id="recipientDisplay"
                        style="font-weight: 600; color: #333"
                     ></p>
                  </div>

                  <div class="form-group">
                     <label for="emailSubject">Betreff *</label>
                     <input
                        type="text"
                        id="emailSubject"
                        name="emailSubject"
                        required
                        placeholder="Email Betreff"
                     />
                  </div>

                  <div class="form-group">
                     <label for="emailMessage">Nachricht *</label>
                     <textarea
                        id="emailMessage"
                        name="emailMessage"
                        rows="8"
                        required
                        placeholder="Ihre Nachricht an den Teilnehmer..."
                     ></textarea>
                  </div>
               </form>
            </div>
            <div class="modal-footer">
               <button
                  class="btn btn-secondary"
                  onclick="closeSendEmailModal()"
               >
                  Abbrechen
               </button>
               <button
                  class="btn btn-primary"
                  id="sendEmailBtn"
                  onclick="sendCustomEmail()"
               >
                  Senden
               </button>
            </div>
         </div>
      </div>

      <script src="js/admin.js"></script>
   </body>
</html>
