<!doctype html>
<html lang="de">
   <head>
      <meta charset="UTF-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <title>Masterarbeit Leon</title>
      <link rel="icon" type="image/svg+xml" href="favicon.svg" />
      <link rel="stylesheet" href="css/index.css" />
   </head>
   <body>
      <div class="container">
         <div class="header">
            <h1>Leons Masterarbeit - Registrierung</h1>
            <p>WÃ¤hlen Sie einen Haupttermin und einen Folgetermin</p>
         </div>

         <div class="content" id="mainContent">
            <!-- Step Indicator -->
            <div class="step-indicator">
               <div class="step" id="step1">
                  <div class="step-number">1</div>
                  <div class="step-label">Daten eingeben</div>
               </div>
               <div class="step-arrow">â†’</div>
               <div class="step" id="step2">
                  <div class="step-number">2</div>
                  <div class="step-label">Haupttermin</div>
               </div>
               <div class="step-arrow">â†’</div>
               <div class="step" id="step3">
                  <div class="step-number">3</div>
                  <div class="step-label">Folgetermin</div>
               </div>
            </div>

            <div id="alertContainer"></div>

            <!-- Step 1: Personal Information -->
            <div id="personalInfoSection" class="section">
               <h2>Ihre Daten</h2>
               <div class="form-group">
                  <label for="name">Name *</label>
                  <input type="text" id="name" name="name" required />
               </div>
               <div class="form-group">
                  <label for="email">E-Mail *</label>
                  <input type="email" id="email" name="email" required />
               </div>
               <button
                  type="button"
                  class="btn btn-primary"
                  id="continueToStep2Btn"
                  onclick="continueToStep2()"
               >
                  Weiter zum Haupttermin
               </button>
            </div>

            <!-- Step 2: Primary Appointment Selection -->
            <div id="primaryAppointmentSection" class="section hidden">
               <h2>
                  <span>Haupttermin auswÃ¤hlen</span>
                  <span class="badge badge-primary">HAUPTTERMIN</span>
               </h2>
               <div class="info-box">
                  <h4>ğŸ“Œ Wichtiger Hinweis</h4>
                  <p>
                     Sie mÃ¼ssen sowohl einen Haupttermin als auch einen
                     Folgetermin buchen.
                  </p>
                  <p>
                     <strong
                        >Der Folgetermin muss zwischen 28 und 32 Tagen nach dem
                        Haupttermin liegen.</strong
                     >
                  </p>
               </div>
               <!-- Featured Timeslot Section -->
               <div
                  id="featuredTimeslotSection"
                  class="hidden"
                  style="margin-bottom: 20px"
               >
                  <div
                     style="
                        background: linear-gradient(
                           135deg,
                           #667eea 0%,
                           #764ba2 100%
                        );
                        color: white;
                        padding: 20px;
                        border-radius: 12px;
                        box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
                     "
                  >
                     <div
                        style="
                           display: flex;
                           align-items: center;
                           gap: 10px;
                           margin-bottom: 10px;
                        "
                     >
                        <span style="font-size: 24px">â­</span>
                        <h3 style="margin: 0; font-size: 1.3em">
                           Empfohlener Termin (Sehr wichtig!)
                        </h3>
                     </div>
                     <p
                        style="margin: 10px 0; opacity: 0.95; font-size: 0.95em"
                     >
                        Dieser erste Termin legt das Fundament fÃ¼r die Studie
                        und ist daher besonders wichtig. Aktuell sind nicht alle
                        nÃ¶tigen PlÃ¤tze gefÃ¼llt. Bitte Ã¼berlegen Sie deshalb, ob
                        Sie diesen Termin Ã¼ber eine eventuelle andere Wahl
                        priorisieren kÃ¶nnen, da es wirklich sehr wichtig ist,
                        dass genug Menschen hierfÃ¼r zusammenkommen.
                     </p>
                     <div
                        id="featuredTimeslotCard"
                        style="
                           background: white;
                           color: #333;
                           padding: 15px;
                           border-radius: 8px;
                           margin-top: 15px;
                           cursor: pointer;
                           transition: transform 0.2s;
                        "
                        onmouseover="this.style.transform = 'scale(1.02)'"
                        onmouseout="this.style.transform = 'scale(1)'"
                     >
                        <!-- Featured timeslot content will be inserted here -->
                     </div>
                  </div>
                  <div
                     style="
                        text-align: center;
                        margin: 15px 0;
                        color: #666;
                        font-weight: 500;
                     "
                  >
                     oder wÃ¤hlen Sie einen anderen Termin unten
                  </div>
               </div>
               <div id="primaryTimeslotsLoading" class="loading">
                  <div class="loading-spinner"></div>
                  <p>Termine werden geladen...</p>
               </div>
               <p
                  id="primaryScrollHint"
                  class="hidden"
                  style="color: #666; font-size: 0.9em; margin-bottom: 5px"
               >
                  â†“ Scrollen Sie nach unten, um alle verfÃ¼gbaren Termine zu
                  sehen
               </p>
               <div id="primaryScrollWrapper" class="timeslots-scroll-wrapper">
                  <div
                     id="primaryTimeslotsContainer"
                     class="timeslots-container hidden"
                  ></div>
               </div>
               <div style="margin-top: 20px">
                  <button
                     type="button"
                     class="btn btn-secondary"
                     onclick="backToStep1()"
                  >
                     â† ZurÃ¼ck
                  </button>
                  <button
                     type="button"
                     class="btn btn-success"
                     id="continueToStep3Btn"
                     onclick="continueToStep3()"
                     disabled
                  >
                     Weiter zum Folgetermin â†’
                  </button>
               </div>
            </div>

            <!-- Step 3: Follow-up Appointment Selection -->
            <div id="followupAppointmentSection" class="section hidden">
               <h2>
                  <span>Folgetermin auswÃ¤hlen</span>
                  <span class="badge badge-followup">FOLGETERMIN</span>
               </h2>
               <div class="alert alert-info">
                  <strong>Ihr gewÃ¤hlter Haupttermin:</strong>
                  <div id="selectedPrimaryInfo" style="margin-top: 10px"></div>
               </div>
               <div
                  class="info-box"
                  style="background: #f0f9f4; border-left-color: #28a745"
               >
                  <h4>âœ… Folgetermin wÃ¤hlen</h4>
                  <p>
                     Bitte wÃ¤hlen Sie einen Folgetermin, der
                     <strong>29-31 Tage</strong> nach Ihrem Haupttermin liegt.
                  </p>
                  <p>Es werden nur passende Termine angezeigt.</p>
               </div>
               <div id="followupTimeslotsLoading" class="loading">
                  <div class="loading-spinner"></div>
                  <p>VerfÃ¼gbare Folgetermine werden geladen...</p>
               </div>
               <p
                  id="followupScrollHint"
                  class="hidden"
                  style="color: #666; font-size: 0.9em; margin-bottom: 5px"
               >
                  â†“ Scrollen Sie nach unten, um alle verfÃ¼gbaren Termine zu
                  sehen
               </p>
               <div id="followupScrollWrapper" class="timeslots-scroll-wrapper">
                  <div
                     id="followupTimeslotsContainer"
                     class="timeslots-container hidden"
                  ></div>
               </div>
               <div style="margin-top: 20px">
                  <button
                     type="button"
                     class="btn btn-secondary"
                     onclick="backToStep2()"
                  >
                     â† ZurÃ¼ck zum Haupttermin
                  </button>
                  <button
                     type="button"
                     class="btn btn-success"
                     id="submitRegistrationBtn"
                     onclick="submitRegistration()"
                     disabled
                  >
                     Anmeldung absenden âœ“
                  </button>
               </div>
            </div>
         </div>

         <div class="footer">
            <p>
               Bereits angemeldet?
               <a href="manage.html">Termin verwalten</a> |
               <a href="admin.html">Admin Login</a>
            </p>
         </div>
      </div>

      <script type="module" src="js/index.js"></script>
   </body>
</html>
