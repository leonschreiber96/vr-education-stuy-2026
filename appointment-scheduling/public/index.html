<!doctype html>
<html lang="de">
   <head>
      <meta charset="UTF-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <title>Studie Anmeldung - Terminfindung</title>
      <link rel="icon" type="image/svg+xml" href="favicon.svg" />
      <link rel="stylesheet" href="css/index.css" />
   </head>
   <body>
      <div class="container">
         <div class="header">
            <h1>ğŸ“… Studie Anmeldung</h1>
            <p>WÃ¤hlen Sie einen Haupttermin und einen Folgetermin</p>
         </div>

         <div class="content" id="mainContent">
            <!-- Step Indicator -->
            <div class="step-indicator">
               <div class="step" id="step1">
                  <div class="step-number">1</div>
                  <div class="step-label">Daten eingeben</div>
               </div>
               <div class="step-arrow">â†’</div>
               <div class="step" id="step2">
                  <div class="step-number">2</div>
                  <div class="step-label">Haupttermin</div>
               </div>
               <div class="step-arrow">â†’</div>
               <div class="step" id="step3">
                  <div class="step-number">3</div>
                  <div class="step-label">Folgetermin</div>
               </div>
            </div>

            <div id="alertContainer"></div>

            <!-- Step 1: Personal Information -->
            <div id="personalInfoSection" class="section">
               <h2>Ihre Daten</h2>
               <div class="form-group">
                  <label for="name">Name *</label>
                  <input type="text" id="name" name="name" required />
               </div>
               <div class="form-group">
                  <label for="email">E-Mail *</label>
                  <input type="email" id="email" name="email" required />
               </div>
               <button
                  type="button"
                  class="btn btn-primary"
                  id="continueToStep2Btn"
                  onclick="continueToStep2()"
               >
                  Weiter zum Haupttermin
               </button>
            </div>

            <!-- Step 2: Primary Appointment Selection -->
            <div id="primaryAppointmentSection" class="section hidden">
               <h2>
                  <span>Haupttermin auswÃ¤hlen</span>
                  <span class="badge badge-primary">HAUPTTERMIN</span>
               </h2>
               <div class="info-box">
                  <h4>ğŸ“Œ Wichtiger Hinweis</h4>
                  <p>
                     Sie mÃ¼ssen sowohl einen Haupttermin als auch einen
                     Folgetermin buchen.
                  </p>
                  <p>
                     <strong
                        >Der Folgetermin muss zwischen 29 und 31 Tagen nach dem
                        Haupttermin liegen.</strong
                     >
                  </p>
               </div>
               <div id="primaryTimeslotsLoading" class="loading">
                  <div class="loading-spinner"></div>
                  <p>Termine werden geladen...</p>
               </div>
               <p
                  id="primaryScrollHint"
                  class="hidden"
                  style="color: #666; font-size: 0.9em; margin-bottom: 5px"
               >
                  â†“ Scrollen Sie nach unten, um alle verfÃ¼gbaren Termine zu
                  sehen
               </p>
               <div id="primaryScrollWrapper" class="timeslots-scroll-wrapper">
                  <div
                     id="primaryTimeslotsContainer"
                     class="timeslots-container hidden"
                  ></div>
               </div>
               <div style="margin-top: 20px">
                  <button
                     type="button"
                     class="btn btn-secondary"
                     onclick="backToStep1()"
                  >
                     â† ZurÃ¼ck
                  </button>
                  <button
                     type="button"
                     class="btn btn-success"
                     id="continueToStep3Btn"
                     onclick="continueToStep3()"
                     disabled
                  >
                     Weiter zum Folgetermin â†’
                  </button>
               </div>
            </div>

            <!-- Step 3: Follow-up Appointment Selection -->
            <div id="followupAppointmentSection" class="section hidden">
               <h2>
                  <span>Folgetermin auswÃ¤hlen</span>
                  <span class="badge badge-followup">FOLGETERMIN</span>
               </h2>
               <div class="alert alert-info">
                  <strong>Ihr gewÃ¤hlter Haupttermin:</strong>
                  <div id="selectedPrimaryInfo" style="margin-top: 10px"></div>
               </div>
               <div
                  class="info-box"
                  style="background: #f0f9f4; border-left-color: #28a745"
               >
                  <h4>âœ… Folgetermin wÃ¤hlen</h4>
                  <p>
                     Bitte wÃ¤hlen Sie einen Folgetermin, der
                     <strong>29-31 Tage</strong> nach Ihrem Haupttermin liegt.
                  </p>
                  <p>Es werden nur passende Termine angezeigt.</p>
               </div>
               <div id="followupTimeslotsLoading" class="loading">
                  <div class="loading-spinner"></div>
                  <p>VerfÃ¼gbare Folgetermine werden geladen...</p>
               </div>
               <p
                  id="followupScrollHint"
                  class="hidden"
                  style="color: #666; font-size: 0.9em; margin-bottom: 5px"
               >
                  â†“ Scrollen Sie nach unten, um alle verfÃ¼gbaren Termine zu
                  sehen
               </p>
               <div id="followupScrollWrapper" class="timeslots-scroll-wrapper">
                  <div
                     id="followupTimeslotsContainer"
                     class="timeslots-container hidden"
                  ></div>
               </div>
               <div style="margin-top: 20px">
                  <button
                     type="button"
                     class="btn btn-secondary"
                     onclick="backToStep2()"
                  >
                     â† ZurÃ¼ck zum Haupttermin
                  </button>
                  <button
                     type="button"
                     class="btn btn-success"
                     id="submitRegistrationBtn"
                     onclick="submitRegistration()"
                     disabled
                  >
                     Anmeldung absenden âœ“
                  </button>
               </div>
            </div>
         </div>

         <div class="footer">
            <p>
               Bereits angemeldet?
               <a href="/manage.html">Termin verwalten</a> |
               <a href="/admin.html">Admin Login</a>
            </p>
         </div>
      </div>

      <script type="module" src="js/index.js"></script>
   </body>
</html>
